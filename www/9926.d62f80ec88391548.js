"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9926],{9926:(U,h,l)=>{l.r(h),l.d(h,{ListaProductosPageModule:()=>E});var P=l(6814),v=l(95),s=l(6728),d=l(3912),u=l(5861),t=l(6242),L=l(2096),p=l(9397),g=l(6306),f=l(9862);const m="https://api-lista-nico.onrender.com/productos",Z={headers:new f.WM({"Content-Type":"application/json"})};let y=(()=>{var e;class i{constructor(o){this.http=o}handleError(o="operation",r){return n=>(console.error("handleError Harrys",n),(0,L.of)(r))}getProducts(){return console.log("getProducts ()"),this.http.get(m).pipe((0,p.b)(o=>console.log("fetched products")),(0,g.K)(this.handleError("getProducts",[])))}deleteProduct(o){return this.http.delete(m+"/"+o,Z).pipe((0,p.b)(r=>console.log("deleted product id=${id}")),(0,g.K)(this.handleError("deleteProduct")))}updateProduct(o,r){return this.http.put(m+"/"+o,r,Z).pipe((0,p.b)(n=>console.log("updated product id=${id}")),(0,g.K)(this.handleError("updateProduct")))}}return(e=i).\u0275fac=function(o){return new(o||e)(t.LFG(f.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),i})();function A(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"ion-item")(1,"ion-label"),t._uU(2),t.qZA(),t.TgZ(3,"ion-label"),t._uU(4),t.qZA(),t.TgZ(5,"ion-button",11),t.NdJ("click",function(){const n=t.CHM(a).$implicit,c=t.oxw();return t.KtG(c.delete(n.id))}),t._UZ(6,"ion-icon",12),t.qZA()()}if(2&e){const a=i.$implicit;t.xp6(2),t.Oqu(a.nombre),t.xp6(2),t.Oqu(a.cantidad)}}const C=()=>["/add-productos"],b=[{path:"",component:(()=>{var e;class i{constructor(o,r,n,c){this.restApi=o,this.loadingController=r,this.alertController=n,this.router=c,this.productos=[]}ngOnInit(){this.getProducts()}getProducts(){var o=this;return(0,u.Z)(function*(){console.log("Entrando :getProducts");const r=yield o.loadingController.create({message:"Cargando lista..."});yield r.present(),console.log("Entrando :"),yield o.restApi.getProducts().subscribe({next:n=>{console.log("Res:"+n),o.productos=n,console.log("thisProductos:",o.productos),r.dismiss()},complete:()=>{},error:n=>{console.log("Err:"+n),r.dismiss()}})})()}delete(o){var r=this;return(0,u.Z)(function*(){r.presentAlertConfirm(o,"Esta eliminando un producto de la lista")})()}presentAlertConfirm(o,r){var n=this;return(0,u.Z)(function*(){yield(yield n.alertController.create({header:"Warning!",message:r,buttons:[{text:"Confirmar Eliminacion",handler:()=>{n.deleteConfirmado(o)}}]})).present()})()}deleteConfirmado(o){var r=this;return(0,u.Z)(function*(){const n=yield r.loadingController.create({message:"Cargando Lista..."});yield n.present(),yield r.restApi.deleteProduct(o).subscribe({next:c=>{console.log("Error DetailProduct P\xe1gina",c),n.dismiss(),r.router.navigate(["/lista-productos"]),window.location.reload()},complete:()=>{},error:c=>{console.log("Error DetailProduct P\xe1gina",c),n.dismiss()}})})()}}return(e=i).\u0275fac=function(o){return new(o||e)(t.Y36(y),t.Y36(s.HT),t.Y36(s.Br),t.Y36(d.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-lista-productos"]],decls:24,vars:4,consts:[[3,"translucent"],["slot","start"],["src","../../assets/imagenes/logo.png","alt","logo",2,"width","100px"],["slot","end"],["defaultHref","/"],[3,"routerLink"],["name","add-circle-outline"],["padding",""],[4,"ngFor","ngForOf"],["routerLink","/menu"],["expand","block","fill","outline",2,"width","100%"],["type","button",3,"click"],["name","trash-outline"]],template:function(o,r){1&o&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),t._uU(3,"Lista de compras"),t.qZA(),t.TgZ(4,"ion-buttons",1),t._UZ(5,"ion-img",2),t.TgZ(6,"ion-buttons",3),t._UZ(7,"ion-back-button",4),t.qZA()()()(),t.TgZ(8,"ion-content")(9,"ion-item")(10,"ion-label")(11,"ion-button",5),t._UZ(12,"ion-icon",6),t._uU(13,"\xa0\xa0 A\xf1adir Producto a la lista"),t.qZA()()(),t.TgZ(14,"ion-list",7)(15,"ion-item")(16,"ion-label"),t._uU(17,"Nombre Producto"),t.qZA(),t.TgZ(18,"ion-label"),t._uU(19,"Cantidad"),t.qZA()(),t.YNc(20,A,7,2,"ion-item",8),t.qZA(),t.TgZ(21,"ion-item",9)(22,"ion-button",10),t._uU(23," Volver al Menu "),t.qZA()()()),2&o&&(t.Q6J("translucent",!0),t.xp6(11),t.Q6J("routerLink",t.DdM(3,C)),t.xp6(9),t.Q6J("ngForOf",r.productos))},dependencies:[P.sg,s.YG,s.Sm,s.W2,s.Gu,s.gu,s.Xz,s.Ie,s.Q$,s.q_,s.wd,s.sr,s.oU,s.YI,d.rH]}),i})()}];let T=(()=>{var e;class i{}return(e=i).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[d.Bz.forChild(b),d.Bz]}),i})(),E=(()=>{var e;class i{}return(e=i).\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[P.ez,v.u5,s.Pc,T]}),i})()}}]);